"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4907],{141:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"development/features/features-login","title":"Login Overview","description":"We decided to make the login feature separated from the signup feature, as their functionality do not have any overlap. The login feature is designed to handle login requests via email and password, as well as Google sign-in.","source":"@site/docs/development/features/login.mdx","sourceDirName":"development/features","slug":"/development/features/features-login","permalink":"/tutorlm/docs/development/features/features-login","draft":false,"unlisted":false,"editUrl":"https://github.com/ohjime/tutorlm/tree/main/docs/docs/development/features/login.mdx","tags":[],"version":"current","lastUpdatedAt":1750659568000,"frontMatter":{"id":"features-login","sidebar_label":"Login Feature"},"sidebar":"developmentSidebar","previous":{"title":"Home Feature","permalink":"/tutorlm/docs/development/features/home"},"next":{"title":"Session Feature","permalink":"/tutorlm/docs/development/features/features-session"}}');var s=n(4848),o=n(8453);const a={id:"features-login",sidebar_label:"Login Feature"},r="Login Overview",l={},d=[{value:"Dependencies",id:"dependencies",level:2},{value:"Feature Overview",id:"feature-overview",level:2},{value:"Login with Email and Password",id:"login-with-email-and-password",level:3},{value:"Login with Google",id:"login-with-google",level:3},{value:"Forgot Password",id:"forgot-password",level:3},{value:"Class Diagram",id:"class-diagram",level:2},{value:"Description",id:"description",level:2},{value:"LoginCubit",id:"logincubit",level:3},{value:"Methods",id:"methods",level:4},{value:"LoginState",id:"loginstate",level:3},{value:"Component Diagram",id:"component-diagram",level:2},{value:"View Details",id:"view-details",level:2},{value:"LoginPage",id:"loginpage",level:3},{value:"LoginView",id:"loginview",level:3},{value:"Sequence Diagram",id:"sequence-diagram",level:4},{value:"Forgot Password Flow",id:"forgot-password-flow",level:3},{value:"Sequence Diagram",id:"sequence-diagram-1",level:4}];function h(e){const i={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",mermaid:"mermaid",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"login-overview",children:"Login Overview"})}),"\n",(0,s.jsx)(i.p,{children:"We decided to make the login feature separated from the signup feature, as their functionality do not have any overlap. The login feature is designed to handle login requests via email and password, as well as Google sign-in."}),"\n",(0,s.jsx)(i.p,{children:"Since this functionality is isolated from the rest of the app, it would be easy to implement new methods of login, with little worry about how it would integrate. A future method of login that would be interesting is password-less login, which would allow users to login via a link sent to their email. This would be a great addition to the app, as it would allow users to login without having to remember a password."}),"\n",(0,s.jsx)(i.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,s.jsx)(i.p,{children:"The core functionality of the login feature is handled by its state machine, which only has one direct external dependency:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://pub.dev/packages/flutter_bloc",children:(0,s.jsx)(i.code,{children:"flutter_bloc"})}),": This package provides a way to manage the state of the application using the BLoC (Business Logic Component) pattern. It allows us to separate the business logic from the UI, making it easier to test and maintain."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://github.com/ohjime/tutorlm/blob/main/lib/core/repositories/authentication_repository.dart",children:(0,s.jsx)(i.code,{children:"core.authentication_repository"})}),": This is our local package that provides a simple interface for our application to handle our authentication and sign up needs as we require."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"The UI of the login feature is built using Flutter, and the following external dependencies:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://pub.dev/packages/delayed_display",children:(0,s.jsx)(i.code,{children:"delayed_display"})}),": For animating the appearance of UI elements with customizable delays and transitions."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://pub.dev/packages/flutter_form_builder",children:(0,s.jsx)(i.code,{children:"flutter_form_builder"})}),": Provides a rich set of form widgets and utilities for building and managing complex forms."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://pub.dev/packages/form_builder_validators",children:(0,s.jsx)(i.code,{children:"form_builder_validators"})}),": Offers a collection of validation functions to ensure form input integrity."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://pub.dev/packages/awesome_dialog",children:(0,s.jsx)(i.code,{children:"awesome_dialog"})}),": Used to display customizable modal dialogs for info, success, warning, and error states."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://pub.dev/packages/font_awesome_flutter",children:(0,s.jsx)(i.code,{children:"font_awesome_flutter"})}),": Supplies a wide range of Font Awesome icons for use throughout the UI."]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"feature-overview",children:"Feature Overview"}),"\n",(0,s.jsx)(i.p,{children:"Below is a detailed breakdown of each implemented functionality within the login feature. Each point is cross-referenced with the user stories that guided its development, ensuring a user-centric approach to the design and implementation:"}),"\n",(0,s.jsx)(i.h3,{id:"login-with-email-and-password",children:"Login with Email and Password"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"User Story #60"})}),": ",(0,s.jsx)(i.em,{children:'"As a user I would like to be able to log in with my email and password so that I can securely access my account"'})]}),"\n",(0,s.jsx)(i.p,{children:"Users will want the login feature to allow them to log in using their email and password. This is a common authentication method that users are familiar with, and it provides a straightforward way for them to access their accounts."}),"\n",(0,s.jsxs)(i.p,{children:["Flutter has a built-in widget called ",(0,s.jsx)(i.code,{children:"TextFormField"})," that allows users to enter text input. However, their default behavior when and error occurs, is to expand the container and display the error message below the field. The animation for this expansion is not smooth, and is amplified when there are multiple fields in a column."]}),"\n",(0,s.jsxs)("figure",{style:{textAlign:"center"},children:[(0,s.jsx)("img",{src:n(8919).A,alt:"Albuquerque, New Mexico",width:"500"}),(0,s.jsxs)("figcaption",{children:[(0,s.jsx)(i.strong,{children:"Figure 1"}),": Default TextFormField Error Animation"]})]}),"\n",(0,s.jsx)(i.p,{children:"It was also hard to emulate the Duolingo login form field, which is a design goal we wanted to achieve. Having the error message appear below each field will cause the email field error to overlap with the bottom field content."}),"\n",(0,s.jsxs)("figure",{style:{textAlign:"center"},children:[(0,s.jsx)("img",{src:n(9266).A,alt:"Albuquerque, New Mexico",width:"300"}),(0,s.jsxs)("figcaption",{children:[(0,s.jsx)(i.strong,{children:"Figure 2"}),": Duolingo Login Form Field"]})]}),"\n",(0,s.jsx)(i.p,{children:"Our solution was to override this behavior was to combine the fields into a single container, and have their errors displayed together line by line:"}),"\n",(0,s.jsx)("figure",{style:{textAlign:"center"},children:(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{style:{textAlign:"center"},children:(0,s.jsx)(i.img,{src:n(9021).A+"",width:"1178",height:"2556"})}),(0,s.jsx)(i.th,{style:{textAlign:"center"},children:(0,s.jsx)(i.img,{src:n(5860).A+"",width:"1178",height:"2556"})})]})}),(0,s.jsx)(i.tbody,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"center"},children:(0,s.jsx)(i.em,{children:"Smooth resizing on new error"})}),(0,s.jsx)(i.td,{style:{textAlign:"center"},children:(0,s.jsx)(i.em,{children:"Smooth resizing on error change"})})]})})]})}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsxs)("figcaption",{style:{textAlign:"center"},children:[(0,s.jsx)(i.strong,{children:"Figure 3"}),": Double Error Layout and Smooth Resizing"]}),"\n",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"The container resize animation was tweaked to be smoother. We also made the google sign-in button fade out when the keyboard is up, which also helped with any over-scroll jitter."]}),"\n",(0,s.jsxs)(i.p,{children:['Lastly, server errors, such as "',(0,s.jsx)(i.em,{children:"email exists"}),'" or "',(0,s.jsx)(i.em,{children:"email banned"}),'" are displayed using the ',(0,s.jsx)(i.a,{href:"https://pub.dev/packages/awesome_dialog",children:"AwesomeDialog package"}),", which is a modal dialog that appears on top of the current screen with premade admonitions. In the future, a more cohesive design would be to have server errors display under the login form field."]}),"\n",(0,s.jsxs)("figure",{style:{textAlign:"center"},children:[(0,s.jsx)("img",{src:n(3613).A,alt:"Albuquerque, New Mexico",width:"200"}),(0,s.jsxs)("figcaption",{children:[(0,s.jsx)(i.strong,{children:"Figure 4"}),": Login Submit Error"]})]}),"\n",(0,s.jsx)(i.h3,{id:"login-with-google",children:"Login with Google"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"User Story #61"})}),": ",(0,s.jsx)(i.em,{children:'"As a user I would like to be able to log in with my Google account, so that I can securely access my account'}),'"']}),"\n",(0,s.jsxs)(i.p,{children:["This was an easy functionality to implement when using Firebase Authentication. Firebase Console provides all the necessary configuration files containing Public API Keys for iOS, Android and Web. They also provide a client to handle the OS Specific UI for authenticating and retrieving the credential with their ",(0,s.jsx)(i.a,{href:"https://pub.dev/packages/google_sign_in",children:"google_sign_in package"}),"."]}),"\n",(0,s.jsxs)("figure",{style:{textAlign:"center"},children:[(0,s.jsx)("img",{src:n(5369).A,alt:"Albuquerque, New Mexico",width:"200"}),(0,s.jsxs)("figcaption",{children:[(0,s.jsx)(i.strong,{children:"Figure 4"}),": Google Sign In"]})]}),"\n",(0,s.jsx)(i.h3,{id:"forgot-password",children:"Forgot Password"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"User Story #81"})}),": ",(0,s.jsx)(i.em,{children:'"As a user, I would like the ability to reset my password so that I can still access my account if I forgot my password"'})]}),"\n",(0,s.jsxs)(i.p,{children:["The login screen provides a ",(0,s.jsx)(i.em,{children:"Forgot Password"})," button directly beneath the main sign-in form. When a user taps this button, they are typically prompted to enter their email address, after which a password reset link is sent to their inbox. This is a standard approach in modern authentication flows, ensuring users can regain access to their accounts without manual intervention from support."]}),"\n",(0,s.jsxs)("figure",{style:{textAlign:"center"},children:[(0,s.jsx)("img",{src:n(8283).A,alt:"Albuquerque, New Mexico",width:"200"}),(0,s.jsxs)("figcaption",{children:[(0,s.jsx)(i.strong,{children:"Figure 4"}),": Google Sign In"]})]}),"\n",(0,s.jsxs)(i.p,{children:["We designed ",(0,s.jsx)(i.em,{children:"Forgot Password"})," button to mock the duolingo login screen, which is a design goal we wanted to achieve. The actual modal pop-up however does not. Being stressed for time, we just used the default UI of the awesome_dialog package, which responds well to the keyboard being up, and when the form is submitted. The functionality also does not follow the architecture of the rest of the app, as it is not handled by the login state machine and simply handled inside of the ",(0,s.jsx)(i.code,{children:"onSubmit"})," function of the form (Again due to time constraints)"]}),"\n",(0,s.jsx)(i.h1,{id:"login-cubit-documentation",children:"Login Cubit Documentation"}),"\n",(0,s.jsxs)(i.p,{children:["This document provides an overview of the ",(0,s.jsx)(i.code,{children:"LoginCubit"})," and its associated state management for the login feature."]}),"\n",(0,s.jsx)(i.h2,{id:"class-diagram",children:"Class Diagram"}),"\n",(0,s.jsx)(i.mermaid,{value:"classDiagram\n    class LoginCubit {\n        - AuthenticationRepository _authenticationRepository\n        + LoginCubit(AuthenticationRepository authenticationRepository)\n        + login(String email, String password)\n        + loginWithGoogle()\n        + resetError()\n    }\n\n    class LoginState {\n        + LoginStatus status\n        + String? errorMessage\n        + LoginState copyWith(LoginStatus? status, String? errorMessage)\n    }\n\n    LoginCubit --\x3e LoginState"}),"\n",(0,s.jsx)(i.h2,{id:"description",children:"Description"}),"\n",(0,s.jsx)(i.h3,{id:"logincubit",children:"LoginCubit"}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"LoginCubit"})," is responsible for managing the state of the login process. It interacts with the ",(0,s.jsx)(i.code,{children:"AuthenticationRepository"})," to handle user authentication. The cubit provides methods for logging in with email and password, logging in with Google, and resetting errors."]}),"\n",(0,s.jsx)(i.h4,{id:"methods",children:"Methods"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"login(String email, String password)"}),": Initiates the login process using the provided email and password. Emits a loading state, followed by either a success or failure state."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"loginWithGoogle()"}),": Initiates the login process using Google authentication. Emits a loading state, followed by either a success or failure state."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"resetError()"}),": Resets the error state to its initial value."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"loginstate",children:"LoginState"}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"LoginState"})," class represents the state of the login process. It includes the following properties:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"status"}),": An enum representing the current status of the login process (",(0,s.jsx)(i.code,{children:"initial"}),", ",(0,s.jsx)(i.code,{children:"loading"}),", ",(0,s.jsx)(i.code,{children:"success"}),", or ",(0,s.jsx)(i.code,{children:"failure"}),")."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"errorMessage"}),": An optional string containing an error message if the login process fails."]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"copyWith"})," method allows for creating a new instance of ",(0,s.jsx)(i.code,{children:"LoginState"})," with updated properties while preserving the existing ones."]}),"\n",(0,s.jsx)(i.h1,{id:"login-view-documentation",children:"Login View Documentation"}),"\n",(0,s.jsxs)(i.p,{children:["This document provides an overview of the ",(0,s.jsx)(i.code,{children:"LoginPage"})," and its associated components for the login feature."]}),"\n",(0,s.jsx)(i.h2,{id:"component-diagram",children:"Component Diagram"}),"\n",(0,s.jsx)(i.mermaid,{value:"flowchart TD\n    LoginPage --\x3e LoginView\n    LoginView --\x3e LoginCubit\n    LoginView --\x3e AuthenticationRepository\n    LoginView --\x3e AwesomeDialog\n    LoginView --\x3e EmailPassLoginField\n    LoginView --\x3e AppButton"}),"\n",(0,s.jsx)(i.h2,{id:"view-details",children:"View Details"}),"\n",(0,s.jsx)(i.h3,{id:"loginpage",children:"LoginPage"}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"LoginPage"})," serves as the entry point for the login feature. It initializes the ",(0,s.jsx)(i.code,{children:"LoginCubit"})," and provides it to the widget tree. This page is responsible for managing the state of the login process and handling user interactions."]}),"\n",(0,s.jsx)(i.h3,{id:"loginview",children:"LoginView"}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"LoginView"})," is a stateful widget that contains the UI for the login feature. It includes the following components:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"EmailPassLoginField"}),": Used for creating and validating the Email Login Form"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"AppButton"}),": Custom buttons for user actions, such as signing in and resetting the password."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"AwesomeDialog"}),": An external flutter package used for displaying dialogs, such as error messages and password reset confirmations. (Source Package: ",(0,s.jsx)(i.a,{href:"https://pub.dev/packages/awesome_dialog",children:"awesome_dialog"}),")"]}),"\n"]}),"\n",(0,s.jsx)(i.h4,{id:"sequence-diagram",children:"Sequence Diagram"}),"\n",(0,s.jsx)(i.mermaid,{value:"sequenceDiagram\n    participant User\n    participant LoginPage\n    participant LoginCubit\n    participant AuthenticationRepository\n\n    User->>LoginPage: Open Login Page\n    LoginPage->>LoginCubit: Initialize\n    User->>LoginCubit: Enter Email and Password\n    LoginCubit->>AuthenticationRepository: Authenticate User\n    AuthenticationRepository--\x3e>LoginCubit: Success or Failure\n    LoginCubit--\x3e>LoginPage: Update State\n    LoginPage--\x3e>User: Show Success or Error Dialog"}),"\n",(0,s.jsx)(i.h3,{id:"forgot-password-flow",children:"Forgot Password Flow"}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"LoginView"}),' also includes a forgot password feature. When the user taps the "Forgot Password" button, a dialog is displayed where the user can enter their email address. Upon submission, the app sends a password reset link to the provided email address.']}),"\n",(0,s.jsx)(i.h4,{id:"sequence-diagram-1",children:"Sequence Diagram"}),"\n",(0,s.jsx)(i.mermaid,{value:"sequenceDiagram\n    participant User\n    participant LoginView\n    participant AuthenticationRepository\n\n    User->>LoginView: Tap Forgot Password\n    LoginView->>AuthenticationRepository: Send Reset Link\n    AuthenticationRepository--\x3e>LoginView: Success or Failure\n    LoginView--\x3e>User: Show Success or Error Dialog"})]})}function c(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},3613:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/login_email_pass_field_error_submit-3b8a36a5c7e11797b98a16f952be4cf9.gif"},5369:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/login_google-9e509119e6187507745cfd721bb036b3.gif"},5860:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/login_email_pass_field_error_changed-a672d400dc62ca73bc2a7604181e7e4d.gif"},8283:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/login_reset_password-4a5e9b6e05385ce2737f61c238d7631e.gif"},8919:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/login_text_form_field_sucks-e48aac98f191520ad7945a103674f00b.gif"},9021:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/login_email_pass_field_error-585e16e36a81e8ce021b97e6d081912b.gif"},9266:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/login_duolingo_reference-cee3379967aa38222535c55628249143.jpg"}}]);